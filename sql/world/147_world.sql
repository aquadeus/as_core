
-- Linked_id TO guid conversion
alter table game_event_creature 
add column guid bigint(20) unsigned not null default 0;

-- now game_event_creature using only guids
UPDATE game_event_creature GEC, creature CT SET GEC.guid = CT.guid WHERE CT.linked_id = GEC.linkedid and CT.linked_id<>'' and GEC.linkedid<>'';

delete from game_event_creature where guid = 0;

ALTER TABLE game_event_creature
DROP PRIMARY KEY,
ADD PRIMARY KEY (guid, eventEntry),
ADD INDEX `guid` (`guid`) USING BTREE ;

alter table creature_addon 
add column guid bigint(20) unsigned not null default 0 first;


alter table creature_formations 
add column leaderGuid bigint(20) unsigned not null default 0 first,
add column memberGuid bigint(20) unsigned not null default 0 after leaderGuid;

-- 
UPDATE creature_formations CFM, creature CT SET CFM.leaderguid = CT.guid WHERE CT.linked_id = CFM.leaderlinkedid and CT.linked_id<>'' and CFM.leaderlinkedid<>'';
UPDATE creature_formations CFM, creature CT SET CFM.memberguid = CT.guid WHERE CT.linked_id = CFM.memberlinkedid and CT.linked_id<>'' and CFM.memberlinkedid<>'';

delete from creature_formations where leaderguid = 0;
delete from creature_formations where memberguid = 0;

ALTER TABLE `creature_formations`
DROP PRIMARY KEY,
ADD PRIMARY KEY (`memberGuid`);

alter table pool_creature 
add column guid bigint(20) unsigned not null default 0 first;

ALTER TABLE `pool_creature`
ADD INDEX `guid` (`guid`) USING BTREE ;



-- now pool_creature using only guids
UPDATE pool_creature PCT, creature CT SET PCT.guid = CT.guid WHERE CT.linked_id = PCT.linkedid and CT.linked_id<>'' and PCT.linkedid<>'';

delete from pool_creature where guid = 0;


-- 

delete from creature_formations where leaderGuid = 18357515;
delete from creature_formations where leaderGuid = 18357513;
delete from creature_formations where memberGuid = 18357515;
INSERT INTO `creature_formations` (`leaderGuid`, `memberGuid`, `leaderLinkedId`, `memberLinkedId`, `dist`, `angle`, `groupAI`, `point_1`, `point_2`) VALUES
('18357515', '18357515', NULL, '', '0', '0', '0', '0', '0'),
('18357515', '18357513', NULL, '', '3.15', '90', '0', '0', '0'),
('18357515', '18357514', NULL, '', '4.41', '45', '0', '0', '0'),
('18357515', '18357516', NULL, '', '3.08', '360', '0', '0', '0');


DELETE FROM `creature_addon` WHERE (`guid`='0') AND (`linked_id`='D4F2D771E84B1F3B6593236DE7795476134924C2') AND (`path_id`='0') AND (`mount`='28912') AND (`bytes1`='0') AND (`bytes2`='0') AND (`emote`='0') AND (`aiAnimKit`='0') AND (`movementAnimKit`='0') AND (`meleeAnimKit`='0') AND (ISNULL(`auras`));

delete from creature_addon where guid = 18357515;
INSERT INTO `creature_addon` (`guid`, `linked_id`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `aiAnimKit`, `movementAnimKit`, `meleeAnimKit`, `auras`) VALUES
('18357515', '\"\"', '18357515', '28912', '0', '0', '0', '0', '0', '0', NULL);

delete from waypoint_data where id = 18357515;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`, `move_type`, `speed`, `action`, `action_chance`, `entry`, `wpguid`) VALUES
('18357515', '1', '-9030.62', '-101.752', '87.6399', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '2', '-9038.6', '-100.963', '87.8385', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '3', '-9043.38', '-98.056', '87.9695', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '4', '-9047.39', '-94.1434', '88.0505', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '5', '-9051.62', '-88.5641', '87.8988', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '6', '-9053.25', '-81.3973', '88.1306', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '7', '-9051.43', '-74.2747', '88.2634', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '8', '-9050.18', '-69.1396', '88.123', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '9', '-9048.72', '-62.6155', '88.2499', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '10', '-9047.77', '-56.7424', '88.1285', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '11', '-9047.32', '-50.4815', '88.2311', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '12', '-9047.59', '-47.3074', '88.303', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '13', '-9047.81', '-44.1652', '88.3105', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '14', '-9047.09', '-40.0277', '88.2663', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '15', '-9045.38', '-34.695', '88.2495', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '16', '-9043.93', '-28.5727', '88.3243', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '17', '-9042.65', '-22.3708', '88.2521', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '18', '-9041.72', '-16.5279', '88.2419', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '19', '-9040.96', '-11.6882', '88.2419', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '20', '-9040.24', '-7.19418', '88.2419', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '21', '-9039.45', '-3.78453', '88.3213', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '22', '-9037.88', '-0.66052', '88.2755', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '23', '-9036.13', '1.52907', '88.2402', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '24', '-9033.14', '3.34626', '88.2282', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '25', '-9032.64', '3.60833', '88.2262', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '26', '-9030.53', '4.5811', '88.2004', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '27', '-9028.73', '5.41063', '88.1687', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '28', '-9026.64', '6.22148', '88.1263', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '29', '-9024.35', '5.97815', '88.1298', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '30', '-9023.19', '5.5033', '88.1658', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '31', '-9019.32', '2.7538', '88.4961', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '32', '-9015.51', '-1.34772', '88.7568', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '33', '-9013.65', '-5.11744', '88.7013', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '34', '-9011.08', '-10.8694', '88.5359', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '35', '-9010.05', '-15.6587', '88.428', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '36', '-9008.89', '-23.2713', '88.3771', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '37', '-9008.41', '-31.6572', '88.2725', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '38', '-9008.48', '-40.0568', '87.7776', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '39', '-9008.2', '-48.1358', '87.373', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '40', '-9007.41', '-56.85', '87.1968', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '41', '-9006.51', '-64.4977', '86.8052', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '42', '-9005.04', '-70.6588', '86.5312', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '43', '-9001.88', '-76.5036', '86.2351', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '44', '-8998.26', '-81.6577', '85.9155', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '45', '-8994.29', '-86.55', '85.4992', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '46', '-8989.42', '-92.5158', '85.5911', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '47', '-8983.21', '-100.096', '85.3898', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '48', '-8977.63', '-105.894', '84.8587', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '49', '-8972.28', '-108.495', '84.6331', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '50', '-8968.24', '-109.635', '84.4338', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '51', '-8962.77', '-110.853', '84.0096', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '52', '-8956.49', '-111.298', '83.6539', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '53', '-8952.3', '-111.018', '83.3626', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '54', '-8944.96', '-110.597', '83.0097', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '55', '-8939.02', '-110.914', '82.8097', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '56', '-8933.5', '-112.056', '82.7163', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '57', '-8929.49', '-113.307', '82.8151', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '58', '-8924.36', '-116.452', '82.5208', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '59', '-8919.99', '-119.954', '82.0956', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '60', '-8921.92', '-123.689', '81.6909', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '61', '-8924.74', '-120.608', '81.9952', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '62', '-8928.12', '-118.066', '82.179', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '63', '-8934.56', '-113.783', '82.5271', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '64', '-8939.01', '-113.26', '82.6487', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '65', '-8945.3', '-113.479', '82.9309', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '66', '-8950.94', '-113.487', '83.2031', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '67', '-8955.48', '-113.593', '83.4724', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '68', '-8962.36', '-112.309', '83.8543', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '69', '-8968.9', '-111.083', '84.2922', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '70', '-8975.23', '-109.062', '84.6399', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '71', '-8980.26', '-104.711', '85.0079', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '72', '-8985.39', '-99.4571', '85.4959', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '73', '-8989.74', '-94.8941', '85.626', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '74', '-8996.34', '-89.1612', '85.6893', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '75', '-9003.89', '-86.3964', '86.1195', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '76', '-9009.07', '-88.4468', '86.2408', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '77', '-9013.4', '-91.4151', '86.4692', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '78', '-9016.9', '-94.3283', '86.8516', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '79', '-9020.45', '-96.5662', '87.0454', '0', '0', '0', '0', '0', '100', '0', '0'),
('18357515', '80', '-9024.08', '-98.6582', '87.261', '0', '0', '0', '0', '0', '100', '0', '0');
